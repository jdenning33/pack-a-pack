import type { Metadata } from 'next';
import localFont from 'next/font/local';
import './globals.css';
import Link from 'next/link';
import { UserProfileDropdown } from '@/features/auth/UserProfileDropdown';
import { AuthGuard } from '@/features/auth/AuthGuard';
import { AuthSignInButton } from '@/features/auth/AuthSignInButton';

const geistSans = localFont({
    src: './fonts/GeistVF.woff',
    variable: '--font-geist-sans',
    weight: '100 900',
});
const geistMono = localFont({
    src: './fonts/GeistMonoVF.woff',
    variable: '--font-geist-mono',
    weight: '100 900',
});

export const metadata: Metadata = {
    title: 'Create Next App',
    description: 'Generated by create next app',
};

export default function RootLayout({
    children,
}: Readonly<{
    children: React.ReactNode;
}>) {
    return (
        <html lang='en'>
            <body
                className={`${geistSans.variable} ${geistMono.variable} antialiased`}
            >
                <div className='min-h-screen flex flex-col'>
                    <header className='bg-white shadow-sm'>
                        <div className='max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center'>
                            <div className='w-1/3'></div>
                            <Link
                                href='/'
                                className='text-2xl font-bold text-gray-900'
                            >
                                packApack.co
                            </Link>
                            <nav className='w-1/3 flex justify-end'>
                                <AuthGuard fallback={<AuthSignInButton />}>
                                    <UserProfileDropdown />
                                </AuthGuard>
                            </nav>
                        </div>
                    </header>
                    <main className='flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8'>
                        {children}
                    </main>
                    <footer className='bg-gray-100'>
                        <div className='max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 text-center text-gray-500'>
                            Â© 2024 packapack.co. All rights reserved.
                        </div>
                    </footer>
                </div>
            </body>
        </html>
    );
}
